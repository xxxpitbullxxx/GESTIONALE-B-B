<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1E90FF">
    <title>Gestionale B&B</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f7fa;
            padding-bottom: 80px;
        }
        .header {
            background: linear-gradient(135deg, #1E90FF 0%, #00CED1 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header h1 { font-size: 24px; margin-bottom: 5px; }
        .header .subtitle { font-size: 14px; opacity: 0.9; }
        
        .tabs {
            display: flex;
            background: white;
            border-bottom: 2px solid #e0e0e0;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        .tab {
            padding: 15px 10px;
            text-align: center;
            border: none;
            background: white;
            cursor: pointer;
            font-size: 13px;
            white-space: nowrap;
            transition: all 0.3s;
            min-width: 100px;
        }
        .tab.active {
            border-bottom: 3px solid #1E90FF;
            color: #1E90FF;
            font-weight: bold;
        }
        
        .content {
            padding: 15px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            color: white !important;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .stat-card.love { background: linear-gradient(135deg, #FF1493 0%, #FF69B4 100%); }
        .stat-card.tart { background: linear-gradient(135deg, #00CED1 0%, #20B2AA 100%); }
        .stat-card.dirette { 
            background: linear-gradient(135deg, #FF9800 0%, #FF5722 100%);
            color: white !important;
        }
        .stat-card.extra-in { background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%); }
        .stat-card.extra-out { background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%); }
        .stat-card.total { background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%); }
        .stat-card.ota { 
            background: linear-gradient(135deg, #607D8B 0%, #455A64 100%);
            color: white !important;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0;
            color: white !important;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.9;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.9) !important;
        }
        
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        
        th {
            background: #2C3E50;
            color: white;
            padding: 12px 6px;
            text-align: left;
            font-weight: 600;
            font-size: 11px;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        td {
            padding: 10px 6px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        tr.month-total {
            background: #e3f2fd !important;
            font-weight: bold;
        }
        
        tr.year-total {
            background: #fff3e0 !important;
            font-weight: bold;
            font-size: 14px;
        }
        
        .ota-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
            cursor: pointer;
            color: white !important;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 14px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #1E90FF;
        }
        
        .btn {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .btn-block {
            width: 100%;
        }
        
        .btn-primary { background: #1E90FF; color: white; }
        .btn-success { background: #4CAF50; color: white; }
        .btn-danger { background: #f44336; color: white; }
        .btn-warning { background: #FF9800; color: white; }
        .btn-info { background: #17a2b8; color: white; }
        
        .btn-small {
            padding: 8px 12px;
            font-size: 11px;
            width: auto;
            display: inline-block;
            margin: 0 5px 0 0;
        }
        
        .btn-edit {
            background: white !important;
            color: #FF9800 !important;
            border: 2px solid black !important;
            font-weight: bold !important;
        }
        
        .btn-delete {
            background: white !important;
            color: #f44336 !important;
            border: 2px solid black !important;
            font-weight: bold !important;
        }
        
        .calc-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .hidden { display: none !important; }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            overflow-y: auto;
        }
        
        .modal-content {
            background: white;
            margin: 50px auto;
            padding: 20px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .close-btn {
            font-size: 28px;
            cursor: pointer;
            color: #999;
        }
        
        .anno-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        
        .anno-btn {
            padding: 8px 15px;
            background: #f0f0f0;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
        }
        
        .anno-btn.active {
            background: #1E90FF;
            color: white;
        }
        
        .ota-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: move;
        }
        
        .ota-item:hover {
            background: #e9ecef;
        }
        
        .ota-color-preview {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 10px;
            display: inline-block;
        }
        
        .quick-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .quick-action-btn {
            flex: 1;
            min-width: 120px;
        }
        
        .mese-tab {
            padding: 8px 12px;
            margin: 2px;
            background: #f0f0f0;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .mese-tab.active {
            background: #1E90FF;
            color: white;
        }
        
        @media (max-width: 600px) {
            .content { padding: 10px; }
            .card { padding: 15px; }
            table { font-size: 11px; }
            th, td { padding: 8px 4px; }
            .stat-grid { grid-template-columns: repeat(2, 1fr); }
            .quick-actions { flex-direction: column; }
            .quick-action-btn { min-width: 100%; }
        }
    </style>
</head>
<body><script>if(sessionStorage.getItem("a")!=="1")window.location.href="/";</script>
    <div class="header">
        <h1>üìä Gestionale B&B</h1>
        <div class="subtitle">Love Nest & La Tartaruga</div>
    </div>
    
    <div class="tabs">
        <button class="tab active" onclick="showTab('dashboard')">üìä Dashboard</button>
        <button class="tab" onclick="showTab('prenotazioni')">üìù Prenotazioni</button>
        <button class="tab" onclick="showTab('analisi-mese')">üìÖ Analisi Mese</button>
        <button class="tab" onclick="showTab('extra')">üíº Extra</button>
        <button class="tab" onclick="showTab('inserisci')">‚ûï Inserisci</button>
        <button class="tab" onclick="showTab('export')">üíæ Export</button>
        <button class="tab" onclick="showTab('config')">‚öôÔ∏è Configura</button>
        <button class="tab" onclick="showTab('import-csv'); mostraImportCSV();">üì§ Import CSV</button>
    </div>
    
    <div class="content">
        <!-- DASHBOARD -->
        <div id="tab-dashboard">
            <div class="anno-selector" id="anno-selector"></div>
            
            <div class="quick-actions">
                <button class="btn btn-primary quick-action-btn" onclick="showTab('inserisci')">
                    ‚ûï Nuova Prenotazione
                </button>
                <button class="btn btn-success quick-action-btn" onclick="showExtraForm('entrata')">
                    üí∞ Nuova Entrata
                </button>
                <button class="btn btn-danger quick-action-btn" onclick="showExtraForm('uscita')">
                    üìâ Nuova Uscita
                </button>
                <button class="btn btn-info quick-action-btn" onclick="showTab('analisi-mese')">
                    üìÖ Analisi Mese
                </button>
            </div>
            
            <!-- BANNER AGGIORNAMENTO DATI -->
            <div id="update-banner" style="display: none; background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%); color: white; padding: 30px; margin: 20px 0; border-radius: 10px; text-align: center; box-shadow: 0 4px 20px rgba(244,67,54,0.4);">
                <h2 style="margin: 0 0 15px 0; font-size: 24px;">‚ö†Ô∏è DATI NON AGGIORNATI</h2>
                <p style="margin: 0 0 20px 0; font-size: 16px;">
                    Il tuo browser sta usando dati vecchi dalla cache.<br>
                    <strong>Click qui sotto per caricare i dati corretti con Riccardo Maltana e totale ‚Ç¨1,339.34</strong>
                </p>
                <button onclick="aggiornaDataOra()" style="background: white; color: #f44336; border: none; padding: 15px 40px; font-size: 18px; font-weight: bold; border-radius: 5px; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                    üîÑ AGGIORNA DATI ORA
                </button>
            </div>
            
            <div class="stat-grid" id="dashboard-stats"></div>
            
            <div class="card">
                <h3>üìà Statistiche per OTA - Anno <span id="current-anno-display">2026</span></h3>
                <div id="ota-stats"></div>
            </div>
        </div>
        
        <!-- PRENOTAZIONI -->
        <div id="tab-prenotazioni" class="hidden">
            <div class="card">
                <div class="quick-actions">
                    <div style="flex: 2;">
                        <label>Filtra per struttura/anno:</label>
                        <select id="filter-select" onchange="filterPrenotazioni()" style="width: 100%;"></select>
                    </div>
                    <div style="flex: 1;">
                        <label>Filtra per OTA:</label>
                        <select id="filter-ota" onchange="filterPrenotazioni()" style="width: 100%;">
                            <option value="">Tutte le OTA</option>
                        </select>
                    </div>
                    <div style="flex: 1;">
                        <label>Cerca ospite:</label>
                        <input type="text" id="search-ospite" placeholder="Cerca..." onkeyup="filterPrenotazioni()">
                    </div>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>OTA</th>
                                <th>Ospite</th>
                                <th>N</th>
                                <th>Netto ‚Ç¨</th>
                                <th>Tasse ‚Ç¨</th>
                                <th>Netto Finale ‚Ç¨</th>
                                <th>Azioni</th>
                            </tr>
                        </thead>
                        <tbody id="prenotazioni-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- ANALISI MESE -->
        <div id="tab-analisi-mese" class="hidden">
            <div class="card">
                <h3>üìÖ Analisi Mensile</h3>
                <div class="anno-selector" id="analisi-anno-selector"></div>
                
                <div id="mese-selector" class="anno-selector"></div>
                
                <div id="analisi-mese-content"></div>
            </div>
        </div>
        
        <!-- EXTRA -->
        <div id="tab-extra" class="hidden">
            <div class="card">
                <div class="anno-selector" id="extra-anno-selector"></div>
                
                <div class="quick-actions">
                    <button class="btn btn-success quick-action-btn" onclick="showExtraForm('entrata')">
                        ‚ûï Nuova Entrata
                    </button>
                    <button class="btn btn-danger quick-action-btn" onclick="showExtraForm('uscita')">
                        ‚ûñ Nuova Uscita
                    </button>
                    <button class="btn btn-warning quick-action-btn" onclick="gestisciClienti()">
                        üë• Gestisci Clienti
                    </button>
                    <button class="btn btn-info quick-action-btn" onclick="gestisciCategorie()">
                        üìÅ Gestisci Categorie
                    </button>
                </div>
                
                <h4 id="sezione-entrate">‚ûï Entrate Extra</h4>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Data</th><th>Servizio</th><th>Cliente</th><th>Importo ‚Ç¨</th><th>Azioni</th></tr>
                        </thead>
                        <tbody id="entrate-body"></tbody>
                    </table>
                </div>
                
                <h4 style="margin-top: 30px;">‚ûñ Uscite</h4>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Data</th><th>Struttura</th><th>Categoria</th><th>Descrizione</th><th>Importo ‚Ç¨</th><th>Azioni</th></tr>
                        </thead>
                        <tbody id="uscite-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- INSERISCI -->
        <div id="tab-inserisci" class="hidden">
            <div class="card">
                <h3>‚ûï Nuova Prenotazione</h3>
                <div class="form-group">
                    <label>Data:</label>
                    <input type="date" id="insert-data" value="">
                </div>
                <div class="form-group">
                    <label>OTA:</label>
                    <select id="insert-ota" onchange="updateCalcPreview()">
                        <!-- OTA verranno aggiunte dinamicamente -->
                    </select>
                    <button class="btn btn-small btn-info" onclick="showTab('config')" style="margin-top: 5px;">
                        ‚öôÔ∏è Gestisci OTA
                    </button>
                </div>
                <div class="form-group">
                    <label>Struttura:</label>
                    <select id="insert-struttura" onchange="updateCalcPreview()">
                        <option value="love">üíï Love Nest</option>
                        <option value="tart">üê¢ Tartaruga</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Anno:</label>
                    <select id="insert-anno" onchange="updateCalcPreview()"></select>
                </div>
                <div class="form-group">
                    <label>Ospiti:</label>
                    <input type="number" id="insert-ospiti" value="2" min="1" onchange="updateCalcPreview()">
                </div>
                <div class="form-group">
                    <label>Notti:</label>
                    <input type="number" id="insert-notti" value="1" min="1" onchange="updateCalcPreview()">
                </div>
                <div class="form-group">
                    <label id="import-label">Importo Ricevuto (‚Ç¨):</label>
                    <input type="number" id="insert-importo" step="0.01" onchange="updateCalcPreview()">
                    <small style="color: #666;">Importo che hai ricevuto sul conto</small>
                </div>
                <div class="calc-info" id="calc-preview">
                    ‚ÑπÔ∏è Compila i campi per vedere il calcolo...
                </div>
                <div class="form-group">
                    <label>Ospite:</label>
                    <input type="text" id="insert-ospite" placeholder="Nome dell'ospite">
                </div>
                <div class="form-group">
                    <label>Note (opzionale):</label>
                    <textarea id="insert-note" rows="2" placeholder="Note aggiuntive..."></textarea>
                </div>
                <button class="btn btn-primary btn-block" onclick="inserisciPrenotazione()" id="btn-inserisci">
                    ‚úÖ Inserisci Prenotazione
                </button>
            </div>
        </div>
        
        <!-- EXPORT -->
        <div id="tab-export" class="hidden">
            <div class="card">
                <div class="form-group">
                    <label>Seleziona cosa esportare:</label>
                    <select id="export-select" class="form-control"></select>
                </div>
                
                <div class="quick-actions">
                    <button class="btn btn-success quick-action-btn" onclick="exportPDFSelezionato()">
                        üìÑ PDF Selezionato
                    </button>
                    <button class="btn btn-primary quick-action-btn" onclick="printReport()">
                        üñ®Ô∏è Stampa Report
                    </button>
                    <button class="btn btn-success quick-action-btn" onclick="exportCSVSelezionato()">
                        üì• CSV Selezionato
                    </button>
                </div>
                
                <div class="quick-actions">
                    <button class="btn btn-primary quick-action-btn" onclick="downloadBackup()">
                        üíæ Backup Completo
                    </button>
                    <input type="file" id="restore-file" accept=".json" style="display:none" onchange="restoreBackup(this)">
                    <button class="btn btn-success quick-action-btn" onclick="document.getElementById('restore-file').click()">
                        üì§ Restore Backup
                    </button>
                </div>
                
                <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
                    <h4>Gestione Anni</h4>
                    <div class="quick-actions">
                        <button class="btn btn-warning quick-action-btn" onclick="chiudiAnnoCorrente()">
                            üìÖ Chiudi Anno Corrente
                        </button>
                        <button class="btn btn-primary quick-action-btn" onclick="aggiungiAnno()">
                            ‚ûï Nuovo Anno
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- CONFIGURAZIONE -->
        <div id="tab-config" class="hidden">
            <div class="card">
                <h3>‚öôÔ∏è Configurazione Sistema</h3>
                
                <div style="margin-bottom: 30px;">
                    <h4>üõ†Ô∏è Gestione OTA</h4>
                    <div id="ota-list"></div>
                    <button class="btn btn-primary" onclick="showOtaModal()">
                        ‚ûï Aggiungi Nuova OTA
                    </button>
                </div>
                
                <div style="margin-bottom: 30px;">
                    <h4>üë• Gestione Clienti</h4>
                    <button class="btn btn-warning btn-block" onclick="gestisciClienti()">
                        üë• Gestisci Clienti
                    </button>
                </div>
                
                <div style="margin-bottom: 30px;">
                    <h4>üìÅ Gestione Categorie</h4>
                    <button class="btn btn-info btn-block" onclick="gestisciCategorie()">
                        üìÅ Gestisci Categorie
                    </button>
                </div>
                
                <div style="margin-bottom: 30px;">
                    <h4>üîß Impostazioni Generali</h4>
                    <div class="form-group">
                        <label>Tassa Love Nest (‚Ç¨ a notte a persona) - dal 2026:</label>
                        <input type="number" id="tassa-love" step="0.01" value="2.50" onchange="salvaImpostazioni()">
                    </div>
                    <div class="form-group">
                        <label>Tassa Tartaruga (‚Ç¨ a notte a persona):</label>
                        <input type="number" id="tassa-tart" step="0.01" value="2.00" onchange="salvaImpostazioni()">
                    </div>
                    <div class="form-group">
                        <label>Anno corrente predefinito:</label>
                        <select id="anno-pred" onchange="salvaImpostazioni()"></select>
                    </div>
                </div>
                
                <button class="btn btn-danger btn-block" onclick="resetConfig()">
                    üîÑ Ripristina Configurazione Predefinita
                </button>
            </div>
        </div>
        
        <!-- IMPORT CSV -->
        <div id="tab-import-csv" class="hidden">
            <div class="card">
                <h3>üì§ Import CSV Prenotazioni</h3>
                <p>Caricamento...</p>
            </div>
        </div>
    </div>
    
    <!-- MODAL EXTRA -->
    <div id="modal-extra" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-extra-title">Extra</h2>
                <span class="close-btn" onclick="closeModal('modal-extra')">&times;</span>
            </div>
            <input type="hidden" id="extra-id">
            <input type="hidden" id="extra-tipo">
            <div class="form-group">
                <label>Data:</label>
                <input type="date" id="extra-data">
            </div>
            <div id="extra-form-entrata">
                <div class="form-group">
                    <label>Servizio:</label>
                    <select id="extra-servizio"></select>
                </div>
                <div class="form-group">
                    <label>Cliente:</label>
                    <select id="extra-cliente"></select>
                    <button type="button" class="btn btn-small btn-primary" onclick="aggiungiClienteModal()" style="margin-top: 5px;">‚ûï Nuovo Cliente</button>
                </div>
            </div>
            <div id="extra-form-uscita" class="hidden">
                <div class="form-group">
                    <label>Struttura:</label>
                    <select id="extra-struttura">
                        <option value="love">Love Nest</option>
                        <option value="tart">Tartaruga</option>
                        <option value="generale">Generale</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Categoria:</label>
                    <select id="extra-categoria"></select>
                    <button type="button" class="btn btn-small btn-primary" onclick="aggiungiCategoriaModal()" style="margin-top: 5px;">‚ûï Nuova Categoria</button>
                </div>
                <div class="form-group">
                    <label>Descrizione:</label>
                    <textarea id="extra-descrizione" rows="2"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label>Importo (‚Ç¨):</label>
                <input type="number" id="extra-importo" step="0.01">
            </div>
            <div class="form-group">
                <label>Anno di riferimento:</label>
                <select id="extra-anno"></select>
            </div>
            <div class="form-group">
                <label>Note (opzionale):</label>
                <textarea id="extra-note" rows="2"></textarea>
            </div>
            <button class="btn btn-primary btn-block" onclick="salvaExtra()">üíæ Salva</button>
            <button class="btn btn-danger btn-block" id="btn-elimina-extra" style="display:none;" onclick="eliminaExtraConferma()">üóëÔ∏è Elimina</button>
        </div>
    </div>

    <!-- MODAL OTA -->
    <div id="modal-ota" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-ota-title">Gestione OTA</h2>
                <span class="close-btn" onclick="closeModal('modal-ota')">&times;</span>
            </div>
            <input type="hidden" id="ota-id">
            <div class="form-group">
                <label>Nome OTA:</label>
                    <input type="text" id="ota-nome" placeholder="Es: Airbnb, Booking, etc.">
                </div>
                <div class="form-group">
                    <label>Emoji:</label>
                    <input type="text" id="ota-emoji" placeholder="üì±, üåê, üè†, etc." maxlength="2">
                </div>
                <div class="form-group">
                    <label>Colore (esadecimale):</label>
                    <input type="color" id="ota-colore" value="#FF5A5F">
                    <input type="text" id="ota-colore-hex" placeholder="#FF5A5F" onchange="document.getElementById('ota-colore').value = this.value">
                </div>
                <div class="form-group">
                    <label>Tipo:</label>
                    <select id="ota-tipo">
                        <option value="entrata">Entrata (prenotazione)</option>
                        <option value="uscita">Uscita (commissione)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Applica tassa di soggiorno?</label>
                    <select id="ota-tassa">
                        <option value="si">S√¨</option>
                        <option value="no">No (es: dirette)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Note:</label>
                    <textarea id="ota-note" rows="2" placeholder="Note sull'OTA..."></textarea>
                </div>
                <button class="btn btn-primary btn-block" onclick="salvaOta()">üíæ Salva OTA</button>
                <button class="btn btn-danger btn-block" id="btn-elimina-ota" style="display:none;" onclick="eliminaOtaConferma()">üóëÔ∏è Elimina OTA</button>
            </div>
        </div>

        <!-- MODAL GESTIONE -->
        <div id="modal-gestione" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modal-gestione-title">Gestione</h2>
                    <span class="close-btn" onclick="closeModal('modal-gestione')">&times;</span>
                </div>
                <div id="gestione-content"></div>
            </div>
        </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="app.js"></script>
</body>
</html>